(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65daa22e"],{"02f4":function(t,o,e){var n=e("4588"),s=e("be13");t.exports=function(t){return function(o,e){var i,r,l=String(s(o)),a=n(e),c=l.length;return a<0||a>=c?t?"":void 0:(i=l.charCodeAt(a),i<55296||i>56319||a+1===c||(r=l.charCodeAt(a+1))<56320||r>57343?t?l.charAt(a):i:t?l.slice(a,a+2):r-56320+(i-55296<<10)+65536)}}},"0390":function(t,o,e){"use strict";var n=e("02f4")(!0);t.exports=function(t,o,e){return o+(e?n(t,o).length:1)}},"0980":function(t,o,e){"use strict";var n=e("0c7b"),s=e.n(n);s.a},"0bfb":function(t,o,e){"use strict";var n=e("cb7c");t.exports=function(){var t=n(this),o="";return t.global&&(o+="g"),t.ignoreCase&&(o+="i"),t.multiline&&(o+="m"),t.unicode&&(o+="u"),t.sticky&&(o+="y"),o}},"0c7b":function(t,o,e){},"214f":function(t,o,e){"use strict";e("b0c5");var n=e("2aba"),s=e("32e9"),i=e("79e5"),r=e("be13"),l=e("2b4c"),a=e("520a"),c=l("species"),p=!i(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),u=function(){var t=/(?:)/,o=t.exec;t.exec=function(){return o.apply(this,arguments)};var e="ab".split(t);return 2===e.length&&"a"===e[0]&&"b"===e[1]}();t.exports=function(t,o,e){var d=l(t),h=!i(function(){var o={};return o[d]=function(){return 7},7!=""[t](o)}),f=h?!i(function(){var o=!1,e=/a/;return e.exec=function(){return o=!0,null},"split"===t&&(e.constructor={},e.constructor[c]=function(){return e}),e[d](""),!o}):void 0;if(!h||!f||"replace"===t&&!p||"split"===t&&!u){var m=/./[d],v=e(r,d,""[t],function(t,o,e,n,s){return o.exec===a?h&&!s?{done:!0,value:m.call(o,e,n)}:{done:!0,value:t.call(e,o,n)}:{done:!1}}),g=v[0],w=v[1];n(String.prototype,t,g),s(RegExp.prototype,d,2==o?function(t,o){return w.call(t,this,o)}:function(t){return w.call(t,this)})}}},"2f21":function(t,o,e){"use strict";var n=e("79e5");t.exports=function(t,o){return!!t&&n(function(){o?t.call(null,function(){},1):t.call(null)})}},"520a":function(t,o,e){"use strict";var n=e("0bfb"),s=RegExp.prototype.exec,i=String.prototype.replace,r=s,l="lastIndex",a=function(){var t=/a/,o=/b*/g;return s.call(t,"a"),s.call(o,"a"),0!==t[l]||0!==o[l]}(),c=void 0!==/()??/.exec("")[1],p=a||c;p&&(r=function(t){var o,e,r,p,u=this;return c&&(e=new RegExp("^"+u.source+"$(?!\\s)",n.call(u))),a&&(o=u[l]),r=s.call(u,t),a&&r&&(u[l]=u.global?r.index+r[0].length:o),c&&r&&r.length>1&&i.call(r[0],e,function(){for(p=1;p<arguments.length-2;p++)void 0===arguments[p]&&(r[p]=void 0)}),r}),t.exports=r},"55dd":function(t,o,e){"use strict";var n=e("5ca1"),s=e("d8e8"),i=e("4bf8"),r=e("79e5"),l=[].sort,a=[1,2,3];n(n.P+n.F*(r(function(){a.sort(void 0)})||!r(function(){a.sort(null)})||!e("2f21")(l)),"Array",{sort:function(t){return void 0===t?l.call(i(this)):l.call(i(this),s(t))}})},"5f1b":function(t,o,e){"use strict";var n=e("23c6"),s=RegExp.prototype.exec;t.exports=function(t,o){var e=t.exec;if("function"===typeof e){var i=e.call(t,o);if("object"!==typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(t))throw new TypeError("RegExp#exec called on incompatible receiver");return s.call(t,o)}},6431:function(t,o,e){"use strict";var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"row",attrs:{id:"app"}},[e("div",{staticClass:"form-group clearfix"},[e("label",{staticClass:"control-label col-md-4"},[t._v("评分:"+t._s(t.starNum)+"星")]),e("div",{staticClass:"col-md-8 course-flex"},[e("div",{staticClass:"grade-box course-flex-item"},t._l(t.stars,function(o,n){return e("img",{attrs:{src:o.src,alt:"星星图片"},on:{click:function(o){t.rating(n)}}})}),0)])])])},s=[],i="images/ios-star-outline.png",r="images/ios-star.png",l={data:function(){return{stars:[{src:i,active:!1},{src:i,active:!1},{src:i,active:!1},{src:i,active:!1},{src:i,active:!1}],starNum:0}},methods:{rating:function(t){var o=this.stars.length,e=t+1;if(0==this.starNum){this.starNum=e;for(var n=0;n<e;n++)this.stars[n].src=r,this.stars[n].active=!0}else{if(e==this.starNum)for(n=t;n<o;n++)this.stars[n].src=i,this.stars[n].active=!1;if(e<this.starNum)for(n=e;n<this.starNum;n++)this.stars[n].src=i,this.stars[n].active=!1;if(e>this.starNum)for(n=0;n<e;n++)this.stars[n].src=r,this.stars[n].active=!0;var s=0;for(n=0;n<o;n++)this.stars[n].active&&s++;this.starNum=s}}}},a=l,c=(e("0980"),e("2877")),p=Object(c["a"])(a,n,s,!1,null,"3d8ed38e",null);p.options.__file="VEvaluate-star.vue";o["a"]=p.exports},"7f7f":function(t,o,e){var n=e("86cc").f,s=Function.prototype,i=/^\s*function ([^ (]*)/,r="name";r in s||e("9e1e")&&n(s,r,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},8568:function(t,o,e){"use strict";e.r(o);var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"wrapper"},[e("div",{attrs:{id:"coursePage"}},[e("header",{staticClass:"bar-title"},[e("mt-header",{attrs:{fixed:"",title:this.$route.query.title}},[e("mt-button",{attrs:{slot:"left"},on:{click:t.back},slot:"left"},[e("i",{staticClass:"backicon iconfont icon-fanhui"})]),e("mt-button",{attrs:{slot:"right"},on:{click:t.shareEvaluate},slot:"right"},[e("i",{staticClass:"backimg1 backicon iconfont icon-daipingjia20"})]),e("mt-button",{attrs:{slot:"right"},on:{click:t.toAdd},slot:"right"},[t._v("添加")])],1)],1),e("div",{staticClass:"content"},[e("div",{staticClass:"mint-cell"},[e("div",{staticClass:"division1 course-flex"},[e("div",{staticClass:"sort"},[e("span",{on:{click:t.clickSort}},[e("i",{staticClass:"backicon iconfont icon-paixu2"}),t._v(t._s(t.sort))]),e("span",[t._v(" | 已更新"+t._s(t.list.length||0)+"篇文章")])]),e("span",{staticClass:"course-flex-item sort2",on:{click:t.pattern}},[e("i",{staticClass:"backicon iconfont",class:{"icon-action_list_componen":t.patternType,"icon-carousel":!t.patternType}}),t._v(t._s(t.patternTypeName)+"\n          ")])]),e("mescroll-vue",{ref:"mescroll",attrs:{down:t.mescrollDown,up:t.mescrollUp},on:{init:t.mescrollInit}},[t._l(t.list,function(o,n){return t.patternType?e("a",{staticClass:"mint-cell-wrapper",attrs:{href:"javascript:;"},on:{click:function(e){t.viewDetails(o.chatId,n)}}},[e("div",{staticClass:"cell__bd"},[e("h2",{staticClass:"title ellipsis-1",class:{"index-l-1":o.stauuuu}},[e("span",{staticClass:"index-l"},[t._v(t._s(t._f("number")(n+1))+" | ")]),t._v(t._s(o.chatTitle))]),e("div",{staticClass:"date"},[t._v(t._s(t._f("formatDate")(o.createTime)))])]),e("div",{staticClass:"mint-cell-allow-right"})]):t._e()}),t._l(t.list,function(o,n){return t.patternType?t._e():e("a",{on:{click:function(e){t.viewDetails(o.chatId,n)}}},[e("div",{staticClass:"graphic-pattern"},[e("img",{staticClass:"cover",attrs:{src:t._f("addBaseUrl")(o.themePic),fit:""}})]),e("div",{staticClass:"cell__bd graphic-pattern-title"},[e("h2",{staticClass:"title ellipsis-1"},[e("span",{staticClass:"index-l"},[t._v(t._s(t._f("number")(n+1))+" | ")]),t._v(t._s(o.chatTitle))]),e("p",{staticClass:"desc ellipsis-2"},[t._v(t._s(o.themeDesc))]),e("div",{staticClass:"date"},[t._v(t._s(t._f("formatDate")(o.createTime)))])])])})],2)],1)]),e("div",{staticClass:"evaluate-a"},[t.evaluate?e("div",{staticClass:"evaluate-b"},[e("div",{staticClass:"mint-msgbox"},[e("div",{staticClass:"mint-msgbox-content"},[e("div",{staticClass:"mint-msgbox-message"},[t._v("请输入评价")]),e("evaluateStar",{attrs:{size:2}}),e("div",{staticClass:"mint-msgbox-input"},[e("mt-field",{attrs:{placeholder:"",type:"textarea",rows:"3",attr:{maxlength:50}},model:{value:t.evaluateContent,callback:function(o){t.evaluateContent=o},expression:"evaluateContent"}}),e("div",{staticClass:"textarea-counter"},[e("span",{},[t._v(t._s(t.evaluateContent.length))]),t._v("/50")])],1)],1),e("div",{staticClass:"mint-msgbox-btns"},[e("button",{staticClass:"mint-msgbox-btn mint-msgbox-cancel ",on:{click:function(o){t.evaluate=!1}}},[t._v("取消")]),e("button",{staticClass:"mint-msgbox-btn mint-msgbox-confirm ",on:{click:t.submission}},[t._v("确定")])])])]):t._e(),t.evaluate?e("div",{staticClass:"v-modal1",on:{click:function(o){t.evaluate=!1}}}):t._e()])])])},s=[],i=(e("55dd"),e("f499")),r=e.n(i),l=(e("a481"),e("7f7f"),e("d00c")),a=e("2b0e"),c=e("8d6b"),p=e("76a0"),u=e("6431");a["default"].component(p["Header"].name,p["Header"]);var d={components:{MescrollVue:c["a"],evaluateStar:u["a"]},created:function(){},data:function(){return{mescroll:null,mescrollDown:{},mescrollUp:{callback:this.fetchData,page:{num:0,size:10},htmlNodata:'<p class="upwarp-nodata">-- END --</p>',noMoreSize:10,toTop:{src:"./static/mescroll/mescroll-totop.png",offset:1e3}},dataList:[],patternType:!0,patternTypeName:"列表模式",sort:"正序",cloneList:[],list:[],evaluate:!1,evaluateContent:""}},beforeRouteEnter:function(t,o,e){e(function(t){t.$refs.mescroll&&t.$refs.mescroll.beforeRouteEnter()})},beforeRouteLeave:function(t,o,e){this.$refs.mescroll&&this.$refs.mescroll.beforeRouteLeave(),e()},filters:{addBaseUrl:function(t){return t?l["a"]+"/"+t:""},formatDate:function(t){return t?t.substring(0,10).replace(/-/g,"."):""},number:function(t){return t<10?"0"+t:t}},methods:{mescrollInit:function(t){this.mescroll=t},fetchData:function(t,o){o||(o=this.mescroll),t||(t={},t.num=1,t.size=8);var e=this;e.axios.post(l["a"]+"/chatInfo/list.inf",e.Qs.stringify({tokenId:localStorage.getItem("tokenId"),timestamp:(new Date).getTime(),curpage:t.num,pageSize:t.size})).then(function(n){var s=n.data.chatInfos||[];1==t.num&&(e.list=[]),t.num,e.list=e.list.concat(s),e.cloneList=JSON.parse(r()(e.list));for(var i=JSON.parse(sessionStorage.getItem("alreadYread")),l=0;l<i.length;l++)e.list[i[l]].stauuuu=!0;e.$nextTick(function(){o.endSuccess(n.data.chatInfos.length)})}).catch(function(t){Object(p["MessageBox"])("网络异常，请检查网络")})},viewDetails:function(t,o){for(var e=JSON.parse(sessionStorage.getItem("alreadYread")),n=0;n<e.length;n++)console.log(e[n]),e[n]==o&&e.splice(n,1);e.unshift(o),sessionStorage.setItem("alreadYread",r()(e)),this.$router.push({path:"/courseDetails",query:{id:t}})},toAdd:function(){this.$router.push("/AddCourse")},pattern:function(){"列表模式"==this.patternTypeName?(this.patternTypeName="图文模式",this.patternType=!1):(this.patternTypeName="列表模式",this.patternType=!0)},clickSort:function(){"正序"==this.sort?(this.sort="倒序",this.list=this.cloneList.reverse()):(this.sort="正序",this.list=this.cloneList.reverse())},back:function(){this.$router.back()},shareEvaluate:function(){var t=JSON.parse(sessionStorage.getItem("alreadYread"));t.length!=this.list.length?Object(p["Toast"])({message:"学习后才能给课程评价哦~",iconClass:"backicon iconfont icon-daipingjia20",duration:1e3}):this.evaluate=!0},submission:function(){if(this.evaluateContent){var t=JSON.parse(localStorage.getItem("finaUser"));this.evaluate=!1;var o={name:t.latestor,date:"2月16日",note:this.evaluateContent,img:"images/06-banner.png"};sessionStorage.setItem("testE",r()(o)),Object(p["Toast"])({message:"评价成功",iconClass:"backicon iconfont icon-ios-checkmark-circle1",duration:1e3})}else Object(p["Toast"])({message:"请填写评价",iconClass:"backicon iconfont icon-ios-close-circle",duration:1e3})}}},h=d,f=(e("8d23"),e("2877")),m=Object(f["a"])(h,n,s,!1,null,"363abdf8",null);m.options.__file="Course.vue";o["default"]=m.exports},"8d23":function(t,o,e){"use strict";var n=e("93d1"),s=e.n(n);s.a},"8d6b":function(t,o,e){"use strict";var n=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{ref:"mescroll",staticClass:"mescroll"},[e("div",[t._t("default")],2)])},s=[],i=e("f868"),r=e.n(i),l=(e("f2fd"),{name:"MeScrollVue",data:function(){return{mescroll:null,lastScrollTop:0,lastBounce:null}},props:{up:Object,down:Object},mounted:function(){this.mescroll=new r.a(this.$refs.mescroll,{up:this.up,down:this.down}),this.$emit("init",this.mescroll)},methods:{beforeRouteEnter:function(){var t=this;this.mescroll&&(this.lastScrollTop&&(this.mescroll.setScrollTop(this.lastScrollTop),setTimeout(function(){t.mescroll.setTopBtnFadeDuration(0)},16)),null!=this.lastBounce&&this.mescroll.setBounce(this.lastBounce))},beforeRouteLeave:function(){this.mescroll&&(this.lastScrollTop=this.mescroll.getScrollTop(),this.mescroll.hideTopBtn(0),this.lastBounce=this.mescroll.optUp.isBounce,this.mescroll.setBounce(!0))}}}),a=l,c=e("2877"),p=Object(c["a"])(a,n,s,!1,null,null,null);p.options.__file="mescroll.vue";o["a"]=p.exports},"93d1":function(t,o,e){},a21f:function(t,o,e){var n=e("584a"),s=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return s.stringify.apply(s,arguments)}},a481:function(t,o,e){"use strict";var n=e("cb7c"),s=e("4bf8"),i=e("9def"),r=e("4588"),l=e("0390"),a=e("5f1b"),c=Math.max,p=Math.min,u=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g,f=function(t){return void 0===t?t:String(t)};e("214f")("replace",2,function(t,o,e,m){return[function(n,s){var i=t(this),r=void 0==n?void 0:n[o];return void 0!==r?r.call(n,i,s):e.call(String(i),n,s)},function(t,o){var s=m(e,t,this,o);if(s.done)return s.value;var u=n(t),d=String(this),h="function"===typeof o;h||(o=String(o));var g=u.global;if(g){var w=u.unicode;u.lastIndex=0}var y=[];while(1){var D=a(u,d);if(null===D)break;if(y.push(D),!g)break;var b=String(D[0]);""===b&&(u.lastIndex=l(d,i(u.lastIndex),w))}for(var S="",T=0,U=0;U<y.length;U++){D=y[U];for(var C=String(D[0]),x=c(p(r(D.index),d.length),0),L=[],E=1;E<D.length;E++)L.push(f(D[E]));var k=D.groups;if(h){var B=[C].concat(L,x,d);void 0!==k&&B.push(k);var _=String(o.apply(void 0,B))}else _=v(C,d,x,L,k,o);x>=T&&(S+=d.slice(T,x)+_,T=x+C.length)}return S+d.slice(T)}];function v(t,o,n,i,r,l){var a=n+t.length,c=i.length,p=h;return void 0!==r&&(r=s(r),p=d),e.call(l,p,function(e,s){var l;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return o.slice(0,n);case"'":return o.slice(a);case"<":l=r[s.slice(1,-1)];break;default:var p=+s;if(0===p)return e;if(p>c){var d=u(p/10);return 0===d?e:d<=c?void 0===i[d-1]?s.charAt(1):i[d-1]+s.charAt(1):e}l=i[p-1]}return void 0===l?"":l})}})},b0c5:function(t,o,e){"use strict";var n=e("520a");e("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},d00c:function(t,o,e){"use strict";e.d(o,"a",function(){return n});e("cadf"),e("551c"),e("097d");var n="/api"},f2fd:function(t,o,e){},f499:function(t,o,e){t.exports=e("a21f")},f868:function(t,o,e){var n,s;
/*!
 * version 1.4.0 MIT
 * 2018-11-25 wenju
 * http://www.mescroll.com
 */
/*!
 * version 1.4.0 MIT
 * 2018-11-25 wenju
 * http://www.mescroll.com
 */
(function(i,r){n=r,s="function"===typeof n?n.call(o,e,o,t):n,void 0===s||(t.exports=s)})(0,function(){var t=function(t,o){var e=this;if(e.version="1.4.0",e.isScrollBody=!t||"body"===t,e.scrollDom=e.isScrollBody?document.body:e.getDomById(t),e.scrollDom){e.options=o||{};var n=navigator.userAgent,s=!!n.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),i="undefined"===typeof window.orientation,r=n.indexOf("Android")>-1||n.indexOf("Adr")>-1;e.os={ios:s,pc:i,android:r},e.isDownScrolling=!1,e.isUpScrolling=!1;var l=e.options.down&&e.options.down.callback;e.initDownScroll(),e.initUpScroll(),setTimeout(function(){e.optDown.use&&e.optDown.auto&&l&&(e.optDown.autoShowLoading?e.triggerDownScroll():e.optDown.callback&&e.optDown.callback(e)),e.optUp.use&&e.optUp.auto&&!e.isUpAutoLoad&&e.triggerUpScroll()},30)}};return t.prototype.extendDownScroll=function(o){t.extend(o,{use:!0,auto:!0,autoShowLoading:!1,isLock:!1,isBoth:!1,offset:80,inOffsetRate:1,outOffsetRate:.2,bottomOffset:20,minAngle:45,hardwareClass:"mescroll-hardware",mustToTop:!1,warpId:null,warpClass:"mescroll-downwarp",resetClass:"mescroll-downwarp-reset",textInOffset:"下拉刷新",textOutOffset:"释放更新",textLoading:"加载中 ...",htmlContent:'<p class="downwarp-progress"></p><p class="downwarp-tip"></p>',inited:function(t,o){t.downTipDom=o.getElementsByClassName("downwarp-tip")[0],t.downProgressDom=o.getElementsByClassName("downwarp-progress")[0]},inOffset:function(t){t.downTipDom&&(t.downTipDom.innerHTML=t.optDown.textInOffset),t.downProgressDom&&t.downProgressDom.classList.remove("mescroll-rotate")},outOffset:function(t){t.downTipDom&&(t.downTipDom.innerHTML=t.optDown.textOutOffset)},onMoving:function(t,o,e){if(t.downProgressDom){var n=360*o;t.downProgressDom.style.webkitTransform="rotate("+n+"deg)",t.downProgressDom.style.transform="rotate("+n+"deg)"}},beforeLoading:function(t,o){return!1},showLoading:function(t){t.downTipDom&&(t.downTipDom.innerHTML=t.optDown.textLoading),t.downProgressDom&&t.downProgressDom.classList.add("mescroll-rotate")},afterLoading:function(t){return 0},callback:function(t){t.resetUpScroll()}})},t.prototype.extendUpScroll=function(o){var e=this.os.pc;t.extend(o,{use:!0,auto:!0,isLock:!1,isBoth:!1,isBounce:!0,callback:null,page:{num:0,size:10,time:null},noMoreSize:5,offset:100,toTop:{warpId:null,src:null,html:null,offset:1e3,warpClass:"mescroll-totop",showClass:"mescroll-fade-in",hideClass:"mescroll-fade-out",fadeDuration:.5,duration:300,supportTap:!1,btnClick:null},loadFull:{use:!1,delay:500},empty:{warpId:null,icon:null,tip:"暂无相关数据~",btntext:"",btnClick:null,supportTap:!1},clearId:null,clearEmptyId:null,hardwareClass:"mescroll-hardware",warpId:null,warpClass:"mescroll-upwarp",htmlLoading:'<p class="upwarp-progress mescroll-rotate"></p><p class="upwarp-tip">加载中..</p>',htmlNodata:'<p class="upwarp-nodata">-- END --</p>',inited:function(t,o){},showLoading:function(t,o){o.innerHTML=t.optUp.htmlLoading},showNoMore:function(t,o){o.innerHTML=t.optUp.htmlNodata},onScroll:null,scrollbar:{use:e,barClass:"mescroll-bar"},lazyLoad:{use:!1,attr:"imgurl",showClass:"mescroll-lazy-in",delay:500,offset:200}})},t.extend=function(o,e){if(!o)return e;for(var n in e)null==o[n]?o[n]=e[n]:"object"===typeof o[n]&&t.extend(o[n],e[n]);return o},t.prototype.initDownScroll=function(){var t=this;if(t.optDown=t.options.down||{},t.extendDownScroll(t.optDown),t.touchstartEvent=function(o){t.isScrollTo&&t.preventDefault(o),t.startPoint=t.getPoint(o),t.lastPoint=t.startPoint,t.maxTouchmoveY=t.getBodyHeight()-t.optDown.bottomOffset,t.inTouchend=!1;var e=t.getScrollTop();t.isKeepTop=0===e,t.os.pc&&e<=0&&(t.scrollDom.addEventListener("mousemove",t.touchmoveEvent,{passive:!1}),document.ondragstart=function(){return!1})},t.scrollDom.addEventListener("mousedown",t.touchstartEvent),t.scrollDom.addEventListener("touchstart",t.touchstartEvent),t.touchmoveEvent=function(o){if(t.startPoint){var e=t.getScrollTop();e>0&&(t.isKeepTop=!1);var n=t.getPoint(o),s=n.y-t.startPoint.y;if(s>0){if(e<=0&&(t.preventDefault(o),t.optDown.use&&!t.inTouchend&&!t.isDownScrolling&&!t.optDown.isLock&&(!t.isUpScrolling||t.isUpScrolling&&t.optUp.isBoth))){if(t.optDown.mustToTop&&!t.isKeepTop)return;var i=Math.abs(t.lastPoint.x-n.x),r=Math.abs(t.lastPoint.y-n.y),l=Math.sqrt(i*i+r*r);if(0!==l){var a=Math.asin(r/l)/Math.PI*180;if(a<t.optDown.minAngle)return}if(t.maxTouchmoveY>0&&n.y>=t.maxTouchmoveY)return t.inTouchend=!0,void t.touchendEvent();var c=n.y-t.lastPoint.y;t.downHight||(t.downHight=0),t.downHight<t.optDown.offset?(1!==t.movetype&&(t.movetype=1,t.optDown.inOffset(t),t.downwarp.classList.remove(t.optDown.resetClass),t.isMoveDown=!0,t.os.ios&&!t.isKeepTop&&(t.scrollDom.classList.add(t.optDown.hardwareClass),t.scrollDom.style.webkitOverflowScrolling="auto",t.isSetScrollAuto=!0)),t.downHight+=c*t.optDown.inOffsetRate):(2!==t.movetype&&(t.movetype=2,t.optDown.outOffset(t),t.downwarp.classList.remove(t.optDown.resetClass),t.isMoveDown=!0,t.os.ios&&!t.isKeepTop&&(t.scrollDom.classList.add(t.optDown.hardwareClass),t.scrollDom.style.webkitOverflowScrolling="auto",t.isSetScrollAuto=!0)),t.downHight+=c>0?c*t.optDown.outOffsetRate:c),t.downwarp.style.height=t.downHight+"px";var p=t.downHight/t.optDown.offset;t.optDown.onMoving(t,p,t.downHight)}}else if(s<0){var u=t.getScrollHeight(),d=t.getClientHeight(),h=u-d-e;!t.optUp.isBounce&&h<=0&&t.preventDefault(o),t.optUp.use&&!t.optUp.isLock&&t.optUp.hasNext&&!t.isUpScrolling&&(!t.isDownScrolling||t.isDownScrolling&&t.optDown.isBoth)&&(d+t.optUp.offset>=u||h<=0)&&t.triggerUpScroll()}t.lastPoint=n}},t.scrollDom.addEventListener("touchmove",t.touchmoveEvent,{passive:!1}),t.touchendEvent=function(){t.optDown.use&&t.isMoveDown&&(t.downHight>=t.optDown.offset?t.triggerDownScroll():(t.downwarp.classList.add(t.optDown.resetClass),t.downHight=0,t.downwarp.style.height=0),t.isSetScrollAuto&&(t.scrollDom.style.webkitOverflowScrolling="touch",t.scrollDom.classList.remove(t.optDown.hardwareClass),t.isSetScrollAuto=!1),t.movetype=0,t.isMoveDown=!1),t.os.pc&&(t.scrollDom.removeEventListener("mousemove",t.touchmoveEvent),document.ondragstart=function(){return!0})},t.scrollDom.addEventListener("mouseup",t.touchendEvent),t.scrollDom.addEventListener("mouseleave",t.touchendEvent),t.scrollDom.addEventListener("touchend",t.touchendEvent),t.scrollDom.addEventListener("touchcancel",t.touchendEvent),t.optDown.use){t.downwarp=document.createElement("div"),t.downwarp.className=t.optDown.warpClass,t.downwarp.innerHTML='<div class="downwarp-content">'+t.optDown.htmlContent+"</div>";var o=t.optDown.warpId?t.getDomById(t.optDown.warpId):t.scrollDom;t.optDown.warpId&&o?o.appendChild(t.downwarp):(o||(o=t.scrollDom),o.insertBefore(t.downwarp,t.scrollDom.firstChild)),setTimeout(function(){t.optDown.inited(t,t.downwarp)},0)}},t.prototype.preventDefault=function(t){t&&t.cancelable&&!t.defaultPrevented&&t.preventDefault()},t.prototype.getPoint=function(t){return{x:t.touches?t.touches[0].pageX:t.clientX,y:t.touches?t.touches[0].pageY:t.clientY}},t.prototype.triggerDownScroll=function(){this.optDown.beforeLoading(this,this.downwarp)||(this.showDownScroll(),this.optDown.callback&&this.optDown.callback(this))},t.prototype.showDownScroll=function(){this.isDownScrolling=!0,this.optDown.showLoading(this),this.downHight=this.optDown.offset,this.downwarp.classList.add(this.optDown.resetClass),this.downwarp.style.height=this.optDown.offset+"px"},t.prototype.endDownScroll=function(){var t=this,o=function(){t.downHight=0,t.downwarp.style.height=0,t.isDownScrolling=!1,t.downProgressDom&&t.downProgressDom.classList.remove("mescroll-rotate")},e=t.optDown.afterLoading(t);"number"===typeof e&&e>0?setTimeout(o,e):o()},t.prototype.lockDownScroll=function(t){null==t&&(t=!0),this.optDown.isLock=t},t.prototype.initUpScroll=function(){var t,o=this;(o.optUp=o.options.up||{use:!1},o.extendUpScroll(o.optUp),o.optUp.scrollbar.use&&o.scrollDom.classList.add(o.optUp.scrollbar.barClass),o.optUp.isBounce||o.setBounce(!1),!1!==o.optUp.use)&&(o.optUp.hasNext=!0,o.upwarp=document.createElement("div"),o.upwarp.className=o.optUp.warpClass,o.optUp.warpId&&(t=o.getDomById(o.optUp.warpId)),t||(t=o.scrollDom),t.appendChild(o.upwarp),o.preScrollY=0,o.lazyStartTime=(new Date).getTime(),o.lazyTag="mescroll-lazying",o.scrollEvent=function(){var t=o.getScrollTop(),e=t-o.preScrollY>0;if(o.preScrollY=t,!o.isUpScrolling&&(!o.isDownScrolling||o.isDownScrolling&&o.optDown.isBoth)&&!o.optUp.isLock&&o.optUp.hasNext){var n=o.getScrollHeight()-o.getClientHeight()-t;n<=o.optUp.offset&&e&&o.triggerUpScroll()}var s=o.optUp.toTop;if((s.src||s.html)&&(t>=s.offset?o.showTopBtn():o.hideTopBtn()),o.optUp.lazyLoad.use){var i=(new Date).getTime();o.lazyTimer&&clearTimeout(o.lazyTimer),i-o.lazyStartTime>=o.optUp.lazyLoad.delay?(o.lazyStartTime=i,o.lazyLoad(0)):o.lazyTimer=o.lazyLoad()}o.optUp.onScroll&&o.optUp.onScroll(o,t,e)},o.isScrollBody?window.addEventListener("scroll",o.scrollEvent):o.scrollDom.addEventListener("scroll",o.scrollEvent),setTimeout(function(){o.optUp.inited(o,o.upwarp)},0))},t.prototype.setBounce=function(t){!this.isScrollBody&&this.os.ios&&(!1===t?(this.optUp.isBounce=!1,window.addEventListener("touchmove",this.bounceTouchmove,{passive:!1})):(this.optUp.isBounce=!0,window.removeEventListener("touchmove",this.bounceTouchmove)))},t.prototype.bounceTouchmove=function(t){var o=this,e=t.target,n=!0;while(e!==document.body&&e!==document){var s=e.classList;if(s){if(s.contains("mescroll")||s.contains("mescroll-touch")){n=!1;break}if(s.contains("mescroll-touch-x")||s.contains("mescroll-touch-y")){var i=t.touches?t.touches[0].pageX:t.clientX,r=t.touches?t.touches[0].pageY:t.clientY;o.preWinX||(o.preWinX=i),o.preWinY||(o.preWinY=r);var l=Math.abs(o.preWinX-i),a=Math.abs(o.preWinY-r),c=Math.sqrt(l*l+a*a);if(o.preWinX=i,o.preWinY=r,0!==c){var p=Math.asin(a/c)/Math.PI*180;if(p<=45&&s.contains("mescroll-touch-x")||p>45&&s.contains("mescroll-touch-y")){n=!1;break}}}}e=e.parentNode}n&&t.cancelable&&!t.defaultPrevented&&"function"===typeof t.preventDefault&&t.preventDefault()},t.prototype.triggerUpScroll=function(){this.optUp.callback&&!this.isUpScrolling&&(this.showUpScroll(),this.optUp.page.num++,this.isUpAutoLoad=!0,this.optUp.callback(this.optUp.page,this))},t.prototype.showUpScroll=function(){this.isUpScrolling=!0,this.upwarp.classList.add(this.optUp.hardwareClass),this.upwarp.style.visibility="visible",this.upwarp.style.display="block",this.optUp.showLoading(this,this.upwarp)},t.prototype.showNoMore=function(){this.upwarp.style.visibility="visible",this.upwarp.style.display="block",this.optUp.hasNext=!1,this.optUp.showNoMore(this,this.upwarp)},t.prototype.hideUpScroll=function(t){t?this.upwarp.style.display="none":this.upwarp.style.visibility="hidden",this.upwarp.classList.remove(this.optUp.hardwareClass);var o=this.upwarp.getElementsByClassName("upwarp-progress")[0];o&&o.classList.remove("mescroll-rotate")},t.prototype.endUpScroll=function(t,o){null!=t&&(t?this.showNoMore():this.hideUpScroll(o)),this.isUpScrolling=!1},t.prototype.resetUpScroll=function(t){if(this.optUp&&this.optUp.use){var o=this.optUp.page;this.prePageNum=o.num,this.prePageTime=o.time,o.num=1,o.time=null,this.isDownScrolling||!1===t||(null==t?(this.removeEmpty(),this.clearDataList(),this.showUpScroll()):this.showDownScroll()),this.isUpAutoLoad=!0,this.optUp.callback&&this.optUp.callback(o,this)}},t.prototype.setPageNum=function(t){this.optUp.page.num=t-1},t.prototype.setPageSize=function(t){this.optUp.page.size=t},t.prototype.clearDataList=function(){var t=this.optUp.clearId||this.optUp.clearEmptyId;if(t){var o=this.getDomById(t);o&&(o.innerHTML="")}},t.prototype.endByPage=function(t,o,e){var n;this.optUp.use&&null!=o&&(n=this.optUp.page.num<o),this.endSuccess(t,n,e)},t.prototype.endBySize=function(t,o,e){var n;if(this.optUp.use&&null!=o){var s=(this.optUp.page.num-1)*this.optUp.page.size+t;n=s<o}this.endSuccess(t,n,e)},t.prototype.endSuccess=function(t,o,e){var n=this;if(n.isDownScrolling&&n.endDownScroll(),n.optUp.use){var s;if(null!=t){var i=n.optUp.page.num,r=n.optUp.page.size;if(1===i&&(n.clearDataList(),e&&(n.optUp.page.time=e)),t<r||!1===o)if(n.optUp.hasNext=!1,0===t&&1===i)s=!1,n.showEmpty();else{var l=(i-1)*r+t;s=!(l<n.optUp.noMoreSize),n.removeEmpty()}else s=!1,n.optUp.hasNext=!0,n.removeEmpty()}var a=!n.optUp.hasNext;n.endUpScroll(s,a),n.loadFull(),n.optUp.lazyLoad.use&&n.lazyLoad()}},t.prototype.endErr=function(){if(this.isDownScrolling){var t=this.optUp.page;t&&this.prePageNum&&(t.num=this.prePageNum,t.time=this.prePageTime),this.endDownScroll()}this.isUpScrolling&&(this.optUp.page.num--,this.endUpScroll(!1))},t.prototype.loadFull=function(){var t=this;t.optUp.loadFull.use&&!t.optUp.isLock&&t.optUp.hasNext&&t.optUp.callback&&t.getScrollHeight()<=t.getClientHeight()&&setTimeout(function(){t.getScrollHeight()<=t.getClientHeight()&&t.triggerUpScroll()},t.optUp.loadFull.delay)},t.prototype.lockUpScroll=function(t){null==t&&(t=!0),this.optUp.isLock=t},t.prototype.showEmpty=function(){var t=this,o=t.optUp.empty,e=o.warpId||t.optUp.clearEmptyId;if(null!=e){var n=t.getDomById(e);if(n){t.removeEmpty();var s="";if(o.icon&&(s+='<img class="empty-icon" src="'+o.icon+'"/>'),o.tip&&(s+='<p class="empty-tip">'+o.tip+"</p>"),o.btntext&&(s+='<p class="empty-btn">'+o.btntext+"</p>"),t.emptyDom=document.createElement("div"),t.emptyDom.className="mescroll-empty",t.emptyDom.innerHTML=s,n.appendChild(t.emptyDom),o.btnClick){var i=t.emptyDom.getElementsByClassName("empty-btn")[0];o.supportTap?i.addEventListener("tap",function(e){e.stopPropagation(),t.preventDefault(e),o.btnClick()}):i.onclick=function(){o.btnClick()}}}}},t.prototype.removeEmpty=function(){this.removeChild(this.emptyDom)},t.prototype.showTopBtn=function(t){if(!this.topBtnShow){this.topBtnShow=!0;var o,e=this,n=e.optUp.toTop;if(null==e.toTopBtn)n.html?(e.toTopBtn=document.createElement("div"),e.toTopBtn.innerHTML=n.html):(e.toTopBtn=document.createElement("img"),e.toTopBtn.src=n.src),e.toTopBtn.className=n.warpClass,n.supportTap?e.toTopBtn.addEventListener("tap",function(t){t.stopPropagation(),e.preventDefault(t);var o=n.btnClick&&n.btnClick();!0!==o&&e.scrollTo(0,e.optUp.toTop.duration)}):e.toTopBtn.onclick=function(){var t=n.btnClick&&n.btnClick();!0!==t&&e.scrollTo(0,e.optUp.toTop.duration)},n.warpId&&(o=e.getDomById(n.warpId)),o||(o=document.body),o.appendChild(e.toTopBtn);e.toTopBtn.classList.remove(n.hideClass),e.toTopBtn.classList.add(n.showClass),e.setTopBtnFadeDuration(t)}},t.prototype.hideTopBtn=function(t){this.topBtnShow&&this.toTopBtn&&(this.topBtnShow=!1,this.toTopBtn.classList.remove(this.optUp.toTop.showClass),this.toTopBtn.classList.add(this.optUp.toTop.hideClass),this.setTopBtnFadeDuration(t))},t.prototype.setTopBtnFadeDuration=function(t){if(this.toTopBtn){var o=(null!=t?t:this.optUp.toTop.fadeDuration)+"s";this.toTopBtn.style.animationDuration=o,this.toTopBtn.style.webkitAnimationDuration=o}},t.prototype.scrollTo=function(t,o){var e=this,n=e.getScrollTop(),s=t;if(s>0){var i=e.getScrollHeight()-e.getClientHeight();s>i&&(s=i)}else s=0;e.isScrollTo=!0,e.scrollDom.style.webkitOverflowScrolling="auto",e.getStep(n,s,function(t){e.setScrollTop(t),t===s&&(e.scrollDom.style.webkitOverflowScrolling="touch",e.isScrollTo=!1)},o)},t.prototype.getStep=function(t,o,e,n,s){var i=o-t;if(0!==n&&0!==i){n=n||300,s=s||30;var r=n/s,l=i/r,a=0,c=window.setInterval(function(){a<r-1?(t+=l,e&&e(t,c),a++):(e&&e(o,c),window.clearInterval(c))},s)}else e&&e(o)},t.prototype.lazyLoad=function(t){var o=this,e=null!=t?t:o.optUp.lazyLoad.delay,n=setTimeout(function(){for(var t=o.scrollDom.querySelectorAll("["+o.optUp.lazyLoad.attr+"]"),e=t.length,n=0;n<e;n++){var s=t[n];if("true"!==s.getAttribute(o.lazyTag)&&o.isInSee(s,o.optUp.lazyLoad.offset)){var i=s.getAttribute(o.optUp.lazyLoad.attr),r=new Image;r.onload=function(){var t=this.src,e=this.dom,n=o.optUp.lazyLoad.showClass;n&&e.classList.add(n),"IMG"===e.tagName?e.src=t:e.style.backgroundImage="url("+t+")",e.removeAttribute(o.optUp.lazyLoad.attr),e.removeAttribute(o.lazyTag)},r.onerror=function(){this.dom.removeAttribute(o.lazyTag)},r.onabort=function(){this.dom.removeAttribute(o.lazyTag)},r.src=i,s.setAttribute(o.lazyTag,"true"),r.dom=s}}},e);return n},t.prototype.isInSee=function(t,o){o=o||0;var e=this.getOffsetTop(t),n=this.getScrollTop()-o,s=e+t.offsetHeight,i=n+o+this.getClientHeight()+o;return e<i&&e>=n||s<=i&&s>n},t.prototype.getOffsetTop=function(t){var o=t.offsetTop,e=t.offsetParent;while(null!=e&&e!==this.scrollDom)o+=e.offsetTop+e.clientTop,e=e.offsetParent;return o},t.prototype.getScrollHeight=function(){return this.scrollDom.scrollHeight},t.prototype.getClientHeight=function(){return this.isScrollBody&&"CSS1Compat"===document.compatMode?document.documentElement.clientHeight:this.scrollDom.clientHeight},t.prototype.getBodyHeight=function(){return document.body.clientHeight||document.documentElement.clientHeight},t.prototype.getScrollTop=function(){return this.isScrollBody?document.documentElement.scrollTop||document.body.scrollTop:this.scrollDom.scrollTop},t.prototype.getToBottom=function(){return this.getScrollHeight()-this.getClientHeight()-this.getScrollTop()},t.prototype.setScrollTop=function(t){"number"===typeof t&&(this.isScrollBody?(document.documentElement.scrollTop=t,document.body.scrollTop=t):this.scrollDom.scrollTop=t)},t.prototype.getDomById=function(t){var o;return t&&("string"===typeof t?o=document.getElementById(t):t.nodeType&&(o=t)),o||console.error('the element with id as "'+t+'" can not be found: document.getElementById("'+t+'")==null'),o},t.prototype.removeChild=function(t){if(t){var o=t.parentNode;o&&o.removeChild(t),t=null}},t.prototype.destroy=function(){var t=this;t.scrollDom.removeEventListener("touchstart",t.touchstartEvent),t.scrollDom.removeEventListener("touchmove",t.touchmoveEvent),t.scrollDom.removeEventListener("touchend",t.touchendEvent),t.scrollDom.removeEventListener("touchcancel",t.touchendEvent),t.scrollDom.removeEventListener("mousedown",t.touchstartEvent),t.scrollDom.removeEventListener("mousemove",t.touchmoveEvent),t.scrollDom.removeEventListener("mouseup",t.touchendEvent),t.scrollDom.removeEventListener("mouseleave",t.touchendEvent),t.removeChild(t.downwarp),t.isScrollBody?window.removeEventListener("scroll",t.scrollEvent):t.scrollDom.removeEventListener("scroll",t.scrollEvent),t.removeChild(t.upwarp),t.removeChild(t.toTopBtn),t.setBounce(!0)},t})}}]);